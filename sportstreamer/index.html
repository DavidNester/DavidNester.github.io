---
layout: default
title: SportStreamer
---
<div class="blurb" style="background-color:slategrey">
<nav style="background-color:lightblue">
	<ul id="sports">
	</ul>
</nav>
<nav style="background-color:green">
	<ul id="games">
	</ul>
</nav>
<nav style="background-color:blue">
	<ul id="links">
	</ul>
</nav>
</div>

<script type="text/javascript">

function message(text) {
	alert(text); 
}
//Sport Buttons
var sports_list = ["Soccer", "NFL", "NBA", "College Football", "College Basketball", "MLB", "NHL"];
var sports = document.getElementById('sports');
var text = "";
for (i = 0; i < sports_list.length; i++) {
	text += "<li><button onclick='getGames(\"https://www.reddit.com/r/soccerstreams\")'>" + sports_list[i] + "</button></li>"
}
sports.innerHTML = text;

function makeHttpObject() {
  try {return new XMLHttpRequest();}
  catch (error) {}
  try {return new ActiveXObject("Msxml2.XMLHTTP");}
  catch (error) {}
  try {return new ActiveXObject("Microsoft.XMLHTTP");}
  catch (error) {}

  throw new Error("Could not create HTTP request object.");
}
var request = makeHttpObject();

function getGames(url) {
	request.open("GET", url, true);
	request.send(null);
	request.onreadystatechange = function() {
	if (request.readyState == 4){
		alert('HTML ACQUIRED');
		parseGames(request.responseText);
	}
	};
}
function parseGames(html) {
	var rawHTML = html
	var doc = document.createElement("html");
	doc.innerHTML = rawHTML;
	var links = doc.getElementsByClassName('title may-blank')
	var urls = [];
	alert(links.length);
	for (var i=0, max=links.length; i<max; i++) {
	if (/\d/.test(links[i].text)){
    urls.push(links[i].href);
    }
	}
	makeSportButtons(urls);
}
function makeSportButtons(urls) {
	var games = document.getElementById('games');
	text = ""
	for (i = 0; i < urls.length; i++) {
	text += "<li><button onclick='getLinks(\""+ urls[i] +"\")'>" + urls[i] + "</button></li>"
}	games.innerHTML = text;
}
function getLinks(url){
	request.open("GET", url, true);
	request.send(null);
	request.onreadystatechange = function() {
  if (request.readyState == 4)
    alert('HTML ACQUIRED');
    parseLinks(request.responseText);
};
}
function parseLinks(html) {
	var rawHTML = html
	var doc = document.createElement("html");
	doc.innerHTML = rawHTML;
	var links = doc.getElementsByTagName('a')
	var urls = [];
	alert(links.length);
	for (var i=0, max=links.length; i<max; i++) {
	if (/\d/.test(links[i].text)){
    urls.push(links[i].href);
    }
	}
	makeSportButtons(urls);
}
//request.responseText
//https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi/related?hl=en-US
</script>